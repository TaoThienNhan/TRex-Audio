!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e){t.exports=jQuery},,function(t,e){t.exports=lodash},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),a=r(2);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.markers={},this.categorySelector=o()("#rank-math-select-category"),this.mapWrapper=o()(".rank-math-local-map"),this.storeLocator=o()("#rank-math-local-store-locator"),this.directionsWrapper=o()(".rank-math-directions-wrapper"),this.address=o()("#rank-math-search-address"),this.currentLocation=o()("#rank-math-current-location"),this.initMap(),this.initStoreLocator(),this.categoryFilter(),this.detectLocation()}var e,r,n;return e=t,(r=[{key:"initMap",value:function(){var t=this;if(!this.mapWrapper.length)return!1;o()(".rank-math-local-map").each((function(e,r){var n=o()(r).data("map-options");if(!Object(a.isUndefined)(n)){var i="rank-math-local-map-"+e;o()(r).attr("id",i),o()(r).removeAttr("data-map-options"),t.initializeMap(i,n)}}))}},{key:"initializeMap",value:function(t,e){var r=this,n=new google.maps.LatLngBounds,o=e.locations,i=Object.keys(o).length>1,s={zoom:parseInt(e.zoom_level),zoomControl:e.allow_zoom,draggable:e.allow_dragging,mapTypeId:e.map_style};i||(s.center={lat:Number(o[Object.keys(o)[0]].lat),lng:Number(o[Object.keys(o)[0]].lng)});var l=new google.maps.Map(document.getElementById(t),s),c=new google.maps.InfoWindow;Object(a.forEach)(o,(function(t,a){var i=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),map:l,type:t.terms});n.extend(i.position),o[a].content=t.content,e.show_infowindow&&google.maps.event.addListener(i,"click",function(t,e){return function(){c.setContent(o[e].content),c.setOptions({maxWidth:200}),c.open(l,t)}}(i,a)),r.markers[a]=i})),i&&l.fitBounds(n),e.show_clustering&&this.markerClusterer(l),this.getRoute(l)}},{key:"markerClusterer",value:function(t){new MarkerClusterer(t,this.markers,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})}},{key:"categoryFilter",value:function(){var t=this;if(!this.categorySelector.length)return!1;this.categorySelector.on("change",(function(){var e=parseInt(t.categorySelector.val());Object(a.forEach)(t.markers,(function(r,n){isNaN(e)?t.markers[n].setVisible(!0):Object(a.isUndefined)(r.type)||-1===o.a.inArray(e,r.type)?t.markers[n].setVisible(!1):t.markers[n].setVisible(!0)}))}))}},{key:"initStoreLocator",value:function(){if(this.storeLocator.length){var t=new google.maps.Geocoder,e=1;o()("#rank-math-local-store-locator").on("submit",(function(r){var n=this;if(1===e){r.preventDefault();var a=o()(this).find("#rank-math-search-address").val();return t.geocode({address:a},(function(t,r){"OK"===r?(o()(n).find("#rank-math-lat").val(t[0].geometry.location.lat()),o()(n).find("#rank-math-lng").val(t[0].geometry.location.lng()),e++,o()(n).trigger("submit")):console.error("Geocode was not successful for the following reason: "+r)})),!1}}))}}},{key:"detectLocation",value:function(){var t=this;this.currentLocation.length&&navigator.geolocation&&this.currentLocation.on("click",(function(e){return e.preventDefault(),navigator.geolocation.getCurrentPosition((function(e){var r={lat:parseFloat(e.coords.latitude),lng:parseFloat(e.coords.longitude)};(new google.maps.Geocoder).geocode({location:r},(function(e,r){"OK"===r&&t.address.val(e[0].formatted_address)}))})),!1}))}},{key:"getRoute",value:function(t){var e=this;if(this.directionsWrapper.length){this.directionsWrapper.find(".rank-math-show-route").on("click",(function(t){t.preventDefault();var e=o()(this).data("toggle-text");return o()(this).data("toggle-text",o()(this).text()).text(e),o()(this).parent().toggleClass("show"),o()(this).parent().find(".rank-math-directions").html()||o()(this).parent().find("form").trigger("submit"),!1}));var r=o()(".rank-math-directions-wrapper").find("form"),n=new google.maps.DirectionsRenderer,a=new google.maps.DirectionsService;n.setMap(t),r.on("submit",(function(t){t.preventDefault();var i=o()(t.target).parent().next(".rank-math-directions"),s={origin:r.find("#rank-math-origin").val(),destination:new google.maps.LatLng(o()(t.target).find("#rank-math-lat").val(),o()(t.target).find("#rank-math-lng").val()),travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL};return a.route(s,(function(t,r){"OK"===r&&(n.setDirections(t),i.html(e.getDirectionsData(t)))})),!1}))}}},{key:"getDirectionsData",value:function(t){var e="",r=t.routes[0].legs[0];return e+="<h4>"+r.start_address+"</h4>",e+="<ul>",Object(a.forEach)(r.steps,(function(t){e+='<li class="'+t.maneuver+'">'+t.instructions+"</li>"})),e+="</ul>",e+="<h4>"+r.end_address+"</h4>",e+="<h5><em>"+t.routes[0].copyrights+"</em><h5>"}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();google.maps.event.addDomListener(window,"load",new s)}]);